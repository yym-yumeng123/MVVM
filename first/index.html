
<script>


	let data = {
		name: 'yangyumegn',
		friends: ['小名', '小红', '小绿']
	}
	observe(data)

	function observe(data) {
		if(!data || typeof data !== 'object') return
	  // for(let key in data) {
	  //   let val = data[key]
	  //   Object.defineProperty(data, key, {
	  //     enumerable: true,
	  //     configurable: false,
	  //     get() {
	  //       console.log(`get ${val}`)
	  //       return val
	  //     },
	  //     set(newVal) {
	  //       console.log(`changes happen: ${val} => ${newVal}`)
	  //       val = newVal
	  //     }
	  //   })
	  //   if(typeof val === 'object'){
	  //     observe(val)
	  //   }
	  // }
	  var keys = Object.keys(data)
	  keys.forEach(key=>{
	  	var val = data[key]
	  	Object.defineProperty(data, key, {
	  		enumerable: true,
	  		configurable: false,
	  		get() {
	  			console.log(`get ${val}`)
	  			return val
	  		},
	  		set(newVal) {
	  			console.log(`changes happen: ${val} => ${newVal}`)
	  			val = newVal
	  		}
	  	})
	  	if(typeof val === 'object'){
	  		observe(val)
	  	}
	  })
	}

</script>